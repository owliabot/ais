# AIS SDK Handoff â€” 2026-02-05 05:47 UTC

## æ¦‚è¿°

AIS (Agent Interaction Standard) TypeScript SDK ç”¨äºè§£æã€éªŒè¯å’Œæ‰§è¡Œ `.ais.yaml` åè®®å®šä¹‰æ–‡ä»¶ã€‚æœ¬æ–‡æ¡£è®°å½•å½“å‰å®ç°çŠ¶æ€ã€å·²å®ŒæˆåŠŸèƒ½ã€å¾…å®Œæˆé¡¹ç›®åŠæ¶æ„å†³ç­–ã€‚

---

## ä»“åº“ç»“æ„

```
owliabot/ais/
â”œâ”€â”€ specs/                    # AIS è§„èŒƒæ–‡æ¡£
â”‚   â”œâ”€â”€ ais-1-core.md        # æ ¸å¿ƒ schema å®šä¹‰
â”‚   â”œâ”€â”€ ais-2-execution.md   # é“¾ç‰¹å®šæ‰§è¡Œæ ¼å¼
â”‚   â””â”€â”€ ais-3-registry.md    # é“¾ä¸Š registry è®¾è®¡
â”œâ”€â”€ examples/                 # ç¤ºä¾‹åè®®æ–‡ä»¶
â”‚   â”œâ”€â”€ uniswap-v3.ais.yaml  # Uniswap V3 DEX
â”‚   â””â”€â”€ aave-v3.ais.yaml     # Aave V3 å€Ÿè´·
â”œâ”€â”€ ts-sdk/                   # TypeScript SDK
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ schema/          # Zod schema å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ parser.ts        # YAML è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ loader.ts        # æ–‡ä»¶/ç›®å½•åŠ è½½
â”‚   â”‚   â”œâ”€â”€ validator/       # çº¦æŸéªŒè¯
â”‚   â”‚   â”œâ”€â”€ resolver/        # è¡¨è¾¾å¼è§£æ
â”‚   â”‚   â”œâ”€â”€ cel/             # CEL è¡¨è¾¾å¼æ±‚å€¼
â”‚   â”‚   â”œâ”€â”€ execution/       # äº¤æ˜“æ„å»º
â”‚   â”‚   â”‚   â”œâ”€â”€ builder.ts   # ä¸»æ„å»ºé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ encoder.ts   # ABI ç¼–ç 
â”‚   â”‚   â”‚   â”œâ”€â”€ pre-authorize.ts  # Token æˆæƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ multicall.ts # æ‰¹é‡è°ƒç”¨
â”‚   â”‚   â”‚   â””â”€â”€ keccak.ts    # Hash å·¥å…·
â”‚   â”‚   â””â”€â”€ index.ts         # ä¸»å¯¼å‡º
â”‚   â””â”€â”€ test/                # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ docs/                    # æ–¹æ¡ˆæ–‡æ¡£ (æœ¬ç›®å½•)
```

---

## å·²å®ŒæˆåŠŸèƒ½

### 1. Schema & Parser (100%)
- âœ… Protocol Spec è§£æ (`parseAisFile`, `parseAisString`)
- âœ… Zod schema éªŒè¯ + TypeScript ç±»å‹æ¨å¯¼
- âœ… æ”¯æŒ Pack å’Œ Workflow ç±»å‹
- âœ… æ–‡ä»¶/ç›®å½•æ‰¹é‡åŠ è½½ (`loadDirectory`, `loadDirectoryAsContext`)

### 2. CEL è¡¨è¾¾å¼å¼•æ“ (100%)
- âœ… ç®—æœ¯è¿ç®— (+, -, *, /, %)
- âœ… æ¯”è¾ƒè¿ç®— (<, >, <=, >=, ==, !=)
- âœ… é€»è¾‘è¿ç®— (&&, ||, !)
- âœ… ä¸‰å…ƒè¡¨è¾¾å¼ (a ? b : c)
- âœ… æˆå‘˜è®¿é—® (params.token_in.address)
- âœ… å†…ç½®å‡½æ•°: `to_atomic`, `to_human`, `min`, `max`, `abs`, `floor`, `ceil`, `round`

### 3. Execution Builder

#### 3.1 evm_call (100%)
- âœ… å•ç¬”å†™äº¤æ˜“æ„å»º
- âœ… ABI ç¼–ç  (æ”¯æŒåŸºç¡€ç±»å‹ + åŠ¨æ€ç±»å‹)
- âœ… Mapping è§£æ (params.*, calculated.*, ctx.*, contracts.*)
- âœ… CEL è¡¨è¾¾å¼æ±‚å€¼
- âœ… `pre_authorize` é›†æˆ

#### 3.2 evm_read (100%)
- âœ… eth_call æŸ¥è¯¢æ„å»º
- âœ… ä¸ evm_call å…±äº«ç¼–ç é€»è¾‘

#### 3.3 evm_multiread (100%)
- âœ… æ‰¹é‡è¯»å–æ”¯æŒ
- âœ… `output_as` å‘½å

#### 3.4 composite (100%)
- âœ… å¤šæ­¥éª¤æ‰§è¡Œ (approve â†’ swap)
- âœ… æ¡ä»¶åˆ¤æ–­ (`condition` CEL è¡¨è¾¾å¼)
- âœ… æ­¥éª¤è·³è¿‡é€»è¾‘

#### 3.5 evm_multicall (100%) â€” ä»Šæ—¥å®Œæˆ
- âœ… `standard` æ¨¡å¼: `multicall(bytes[])`
- âœ… `multicall3` æ¨¡å¼: `aggregate3((address,bool,bytes)[])`
- âœ… `universal_router` æ¨¡å¼: `execute(bytes,bytes[],uint256)`
- âœ… æ¡ä»¶åˆ¤æ–­
- âœ… Deadline è§£æ

#### 3.6 pre_authorize (100%) â€” ä»Šæ—¥å®Œæˆ
- âœ… `approve`: æ ‡å‡† ERC20 approve tx
- âœ… `permit`: EIP-2612 ç­¾åæ•°æ®ç”Ÿæˆ
- âœ… `permit2`: Uniswap Permit2 æµç¨‹
- âœ… Allowance æ£€æŸ¥è¾…åŠ©å‡½æ•°
- âœ… ä¸ buildTransaction é›†æˆ

### 4. Validator (100%)
- âœ… Pack çº¦æŸéªŒè¯ (`validateConstraints`)
- âœ… Workflow éªŒè¯ (`validateWorkflow`)
- âœ… åè®®ä¾èµ–æ£€æŸ¥ (`getWorkflowProtocols`)

---

## å¾…å®ŒæˆåŠŸèƒ½

### é«˜ä¼˜å…ˆçº§ (P0)

| åŠŸèƒ½ | è¯´æ˜ | é¢„ä¼°å·¥æ—¶ |
|------|------|----------|
| **Solana æ‰§è¡Œ** | `solana_instruction` ç±»å‹å®ç° | 4-6h |
| **Detect å¯¹è±¡** | `best_quote`, `best_path` provider é›†æˆ | 3-4h |
| **Output è§£ç ** | eth_call è¿”å›å€¼ ABI è§£ç  | 2-3h |

### ä¸­ä¼˜å…ˆçº§ (P1)

| åŠŸèƒ½ | è¯´æ˜ | é¢„ä¼°å·¥æ—¶ |
|------|------|----------|
| **Cosmos æ‰§è¡Œ** | `cosmos_message` ç±»å‹ | 3-4h |
| **Move æ‰§è¡Œ** | `move_entry` (Aptos/Sui) | 3-4h |
| **Bitcoin æ‰§è¡Œ** | `bitcoin_psbt` ç±»å‹ | 4-5h |
| **åµŒå¥— ABI** | Tuple/struct ç¼–ç  | 2-3h |

### ä½ä¼˜å…ˆçº§ (P2)

| åŠŸèƒ½ | è¯´æ˜ | é¢„ä¼°å·¥æ—¶ |
|------|------|----------|
| **CLI å·¥å…·** | å‘½ä»¤è¡ŒéªŒè¯/æ„å»ºå·¥å…· | 2-3h |
| **JSON Schema å¯¼å‡º** | ä» Zod ç”Ÿæˆ JSON Schema | 1-2h |
| **æ–‡æ¡£ç”Ÿæˆ** | TypeDoc API æ–‡æ¡£ | 1-2h |

---

## SDK â†” Spec å·²çŸ¥å·®å¼‚

ä»¥ä¸‹æ˜¯ä¹‹å‰åˆ†æçš„ SDK ä¸ spec ä¸ä¸€è‡´ä¹‹å¤„ï¼ˆéƒ¨åˆ†å·²ä¿®å¤ï¼‰ï¼š

| å·®å¼‚ç‚¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| `pre_authorize` | âœ… å·²ä¿®å¤ | ä»Šæ—¥å®ç° |
| `evm_multicall` | âœ… å·²ä¿®å¤ | ä»Šæ—¥å®ç° |
| `execution` block ç»“æ„ | âš ï¸ éƒ¨åˆ† | åŸºç¡€ç±»å‹å®Œæˆï¼Œdetect å¯¹è±¡å¾…å®Œå–„ |
| `chain_id` æ ¼å¼ | â³ å¾…è¯„ä¼° | SDK ç”¨ numberï¼Œspec ç”¨ CAIP-2 string |
| `calculated_fields` ç»“æ„ | âœ… å·²å®ç° | æ”¯æŒ expr + inputs |
| `risk` å¯¹è±¡ | â³ å¾…å¯¹é½ | Schema å­˜åœ¨ä½†æœªå®Œå…¨éªŒè¯ |

---

## æµ‹è¯•è¦†ç›–

```
Test Files:  10 passed
Tests:       221 passed
Duration:    ~650ms

æµ‹è¯•åˆ†å¸ƒ:
- CEL å¼•æ“: 69 tests
- Execution: 28 tests + 15 (pre-auth) + 12 (multicall)
- Resolver: 24 tests
- Integration: 18 tests
- Validator: 17 tests
- Parser: 16 tests
- Builder: 14 tests
- Loader: 8 tests
```

---

## å…³é”® Commits (ä»Šæ—¥)

| Commit | æè¿° |
|--------|------|
| `f815b17` | feat(sdk): implement pre_authorize for token approvals |
| `b207467` | feat(sdk): implement evm_multicall execution type |

---

## ä¸‹ä¸€æ­¥å»ºè®®

1. **Output è§£ç ** â€” ä½¿ query ç»“æœå¯ç”¨äº calculated_fields
2. **Detect å¯¹è±¡** â€” å®ç° provider æ¥å£ï¼Œæ”¯æŒåŠ¨æ€å€¼è§£æ
3. **ç«¯åˆ°ç«¯æµ‹è¯•** â€” ä½¿ç”¨çœŸå® RPC éªŒè¯ Uniswap/Aave ç¤ºä¾‹

---

## è”ç³»æ–¹å¼

- ä»“åº“: https://github.com/owliabot/ais
- ä¸»è¦è´¡çŒ®è€…: @CyberOrange, @Lay2 (AI Assistant)

---

*Generated by Lay2 ğŸ° at 2026-02-05 05:47 UTC*
